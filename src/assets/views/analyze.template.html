<div class="container">
    <hr>
    <h1>Analyse</h1>
    <hr>
    <!--<a ng-click="analyze.debug()" class="btn-primary btn">Débug</a>-->
    <p class="chargement">{{ analyze.isMapUpdating() }}</p>
    <hr>
</div>

<div class="row">
    <div class="col">
        <h3>Sélection des lots</h3>
        <hr>
        <div ng-repeat="(key, value) in analyze.plots" class="form-check">
            <input class="form-check-input" ng-click="analyze.refresh()" ng-model="value.selected" type="checkbox" value="{{key}}" id="lot-{{key}}">
            <label class="form-check-label" for="lot-{{key}}">
                {{value.name}}
            </label>
        </div>
        <fieldset ng-show="analyze.mode == 'graphique'">
            <legend class="col-form-legend">Options graphique</legend>
            <div class="col">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="filters-radio" ng-click="analyze.refresh()" ng-model="analyze.filter" id="total-radio" value="all" checked>
                    <label class="form-check-label" for="total-radio">
                        Total
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="filters-radio" ng-click="analyze.refresh()" ng-model="analyze.filter" id="homme-femme-radio" value="homme_femme">
                    <label class="form-check-label" for="homme-femme-radio">
                        Homme / Femme
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="filters-radio" ng-click="analyze.refresh()" ng-model="analyze.filter" id="boursiers-radio" value="boursiers">
                    <label class="form-check-label" for="boursiers-radio">
                        Boursiers
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="filters-radio" ng-click="analyze.refresh()" ng-model="analyze.filter" id="lycee-radio" value="lycee">
                    <label class="form-check-label" for="lycee-radio">
                        Lycée
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="filters-radio" ng-click="analyze.refresh()" ng-model="analyze.filter" id="departement-radio" value="departement">
                    <label class="form-check-label" for="departement-radio">
                        Département
                    </label>
                </div>
            </div>
        </fieldset>

        <fieldset ng-show="analyze.mode == 'carte'">
            <legend class="col-form-legend">Tri par sexe</legend>
            <div class="col-sm-10">
                <div class="form-check" ng-repeat="(key, data) in analyze.sexeList">
                    <input class="form-check-input" ng-click="analyze.refresh()" ng-model="data.selected" type="checkbox" value="{{key}}" id="sexe-{{key}}">
                    <label class="form-check-label" for="sexe-{{key}}">
                        {{key}}
                    </label>
                </div>
            </div>
        </fieldset>

        <fieldset ng-show="analyze.mode == 'carte'">
            <legend class="col-form-legend">Candidats boursiers</legend>
            <div class="col-sm-10">
                <div class="form-check" ng-repeat="(key, data) in analyze.boursierList">
                    <input class="form-check-input" ng-click="analyze.refresh()" ng-model="data.selected" type="checkbox" value="{{key}}" id="boursier-{{key}}">
                    <label class="form-check-label" for="boursier-{{key}}">
                        {{key}}
                    </label>
                </div>
            </div>
        </fieldset>
    </div>

    <div class="col-6 card">
        <hr>
        <ul class="nav nav-pills nav-fill">
            <li class="nav-item">
                <a class="nav-link" ng-click="analyze.setModeGraphique()" ui-sref="analyze.graphs">Mode graphique</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" ng-click="analyze.setModeCarte()" ui-sref="analyze.map">Mode carte</a>
            </li>
        </ul>
        <hr>
        <div ui-view></div>
    </div>
    <div class="col">
        <h3>Filtres</h3>
        <hr>
        <fieldset>
            <legend class="col-form-legend">Série de bac</legend>
            <div class="col-sm-10">
                <div class="form-check" ng-repeat="(key, data) in analyze.bacList">
                    <input class="form-check-input" ng-click="analyze.refresh()" ng-model="data.selected" type="checkbox" value="{{key}}" id="lot-bac-{{key}}">
                    <label class="form-check-label" for="lot-bac-{{key}}">
                        {{key}}
                    </label>
                </div>
            </div>
        </fieldset>
    </div>
</div>
